# Hasher - Servi√ßo de Integra√ß√£o com Open Finance

## üìã Descri√ß√£o
Hasher √© um servi√ßo de integra√ß√£o com Open Finance que fornece uma API RESTful para gerenciar autentica√ß√£o, autoriza√ß√£o e integra√ß√£o com servi√ßos financeiros.

## üöÄ Tecnologias
- Node.js
- TypeScript
- Express
- Redis
- Elasticsearch
- Prometheus
- Grafana
- Docker
- Docker Compose
- IA (Gemma Mistral Ollama)

## ü§ñ Integra√ß√£o com IA

O sistema utiliza intelig√™ncia artificial para fornecer an√°lises avan√ßadas e assist√™ncia automatizada atrav√©s do modelo Gemma 2B, integrado via Ollama.

### Funcionalidades de IA

1. **Assistente Virtual**
   - Chat interativo para d√∫vidas sobre finan√ßas
   - Respostas contextualizadas sobre solv√™ncia e cr√©dito
   - Interface amig√°vel e responsiva

2. **An√°lise de Risco**
   - Avalia√ß√£o autom√°tica de perfis financeiros
   - Pontua√ß√£o de risco (0-100)
   - Recomenda√ß√µes personalizadas

3. **Otimiza√ß√£o ZKP**
   - Sugest√µes de tipos de prova mais eficientes
   - An√°lise de efici√™ncia (0-100)
   - Explica√ß√µes detalhadas das recomenda√ß√µes

4. **Detec√ß√£o de Fraudes**
   - An√°lise de transa√ß√µes suspeitas
   - N√≠vel de confian√ßa da detec√ß√£o
   - Detalhamento de poss√≠veis fraudes

### Configura√ß√£o da IA

1. **Requisitos**
   - Ollama instalado e configurado
   - Modelo Gemma 2B baixado
   - Conex√£o com a API do Ollama

2. **Vari√°veis de Ambiente**
   ```env
   OLLAMA_API_URL=http://localhost:11434
   MODEL_NAME=gemma:2b
   ```

3. **Inicializa√ß√£o**
   ```bash
   # Verificar se o Ollama est√° rodando
   curl http://localhost:11434/api/tags

   # Iniciar o servi√ßo de IA
   npm run start:ai
   ```

### Componentes de IA

- `AIAssistant`: Interface principal do chat
- `FinancialChatbot`: Chat especializado em finan√ßas
- `AINavigation`: Navega√ß√£o entre funcionalidades de IA
- `aiService`: Servi√ßo de integra√ß√£o com a IA
- `ollamaService`: Gerenciamento da conex√£o com Ollama

## üì¶ Pr√©-requisitos
- Docker
- Docker Compose
- Node.js 18+
- npm 8+
- Ollama (para funcionalidades de IA)
- Modelo Gemma 2B baixado no Ollama
- M√≠nimo 8GB de RAM para execu√ß√£o da IA
- Conex√£o est√°vel com a internet para download do modelo

## üîß Instala√ß√£o

1. Clone o reposit√≥rio:
```bash
git clone https://github.com/seu-usuario/hasher.git
cd hasher
```

2. Configure as vari√°veis de ambiente:
```bash
cp .env-dev .env
```

3. Edite o arquivo `.env` com suas configura√ß√µes.

4. Instale e configure o Ollama (para funcionalidades de IA):
```bash
# Instalar Ollama (Linux)
curl https://ollama.ai/install.sh | sh

# Baixar o modelo Gemma 2B
ollama pull gemma:2b

# Verificar se o modelo foi baixado corretamente
ollama list
```

## üöÄ Execu√ß√£o

### M√©todo 1: Usando o script de inicializa√ß√£o (Recomendado)
```bash
# Tornar o script execut√°vel
chmod +x start-server.sh

# Executar o script
./start-server.sh
```

### M√©todo 2: Usando Docker Compose diretamente
```bash
# Iniciar os servi√ßos
docker compose up --build -d

# Verificar logs
docker compose logs -f

# Parar os servi√ßos
docker compose down
```

## üåê Endpoints Dispon√≠veis

### API (http://localhost:3001)
- `GET /health` - Verificar status do servidor
- `GET /metrics` - M√©tricas do Prometheus
- `GET /api/*` - Rotas da API

### Grafana (http://localhost:3002)
- Usu√°rio: admin
- Senha: ibeleve123

### Prometheus (http://localhost:9090)
- M√©tricas e alertas

### Elasticsearch (http://localhost:9200)
- Usu√°rio: elastic
- Senha: ibeleve123

### Alertmanager (http://localhost:9093)
- Gerenciamento de alertas

## üìä Monitoramento

### Grafana
- Dashboards pr√©-configurados para monitoramento
- M√©tricas de performance
- Alertas configur√°veis

### Prometheus
- Coleta de m√©tricas
- Regras de alerta
- Hist√≥rico de dados

### Elasticsearch
- Logs centralizados
- An√°lise de performance
- Busca em tempo real

## üîç Logs

Os logs s√£o centralizados no Elasticsearch e podem ser visualizados atrav√©s do Grafana ou diretamente via API do Elasticsearch.

## üîê Seguran√ßa

- Autentica√ß√£o JWT
- Rate limiting
- CORS configurado
- Sanitiza√ß√£o de inputs
- Headers de seguran√ßa

## üß™ Testes

```bash
# Executar testes
npm test

# Executar testes com coverage
npm run test:coverage

# Executar testes em modo watch
npm run test:watch
```

## üìù Scripts Dispon√≠veis

- `npm start` - Inicia o servidor em produ√ß√£o
- `npm run dev` - Inicia o servidor em desenvolvimento
- `npm run build` - Compila o TypeScript
- `npm test` - Executa os testes
- `npm run lint` - Executa o linter
- `npm run clean` - Limpa o diret√≥rio dist
- `npm run start:ai` - Inicia o servi√ßo de IA
- `npm run test:ai` - Executa testes espec√≠ficos da IA
- `npm run ollama:check` - Verifica status do Ollama
- `npm run ollama:restart` - Reinicia o servi√ßo Ollama

## ü§ù Contribuindo

1. Fa√ßa um fork do projeto
2. Crie uma branch para sua feature (`git checkout -b feature/AmazingFeature`)
3. Commit suas mudan√ßas (`git commit -m 'Add some AmazingFeature'`)
4. Push para a branch (`git push origin feature/AmazingFeature`)
5. Abra um Pull Request

## üìÑ Licen√ßa

Este projeto est√° sob a licen√ßa ISC. Veja o arquivo [LICENSE](LICENSE) para mais detalhes.

## üë• Autores

- Seu Nome - [@seu-usuario](https://github.com/seu-usuario)

## üôè Agradecimentos

- Open Finance
- Comunidade Node.js
- Comunidade Docker

# Ibelieve Finance - Sistema de Verifica√ß√£o Blockchain

Este √© um sistema distribu√≠do para verifica√ß√£o de transa√ß√µes blockchain usando Zero Knowledge Proofs (ZKP).

## Estrutura do Projeto

O sistema √© composto por v√°rios microservi√ßos:

- **Blockchain Service** (Porta 8084): Servi√ßo de verifica√ß√£o blockchain
- **User Service** (Porta 8085): Gerenciamento de usu√°rios
- **ZKP Service** (Porta 8082): Gera√ß√£o e verifica√ß√£o de provas ZKP

## Requisitos

- Rust (√∫ltima vers√£o est√°vel)
- Cargo
- Docker (opcional, para containeriza√ß√£o)
- Node.js 18+ (para ferramentas de desenvolvimento)
- npm 8+ (para ferramentas de desenvolvimento)

## Instala√ß√£o

1. Clone o reposit√≥rio:
```bash
git clone https://github.com/seu-usuario/ibelieve-finance.git
cd ibelieve-finance
```

2. Instale as depend√™ncias:
```bash
cargo build
```

## Comandos e Funcionalidades

### Comandos de Desenvolvimento

```bash
# Compilar o projeto
cargo build

# Executar testes
cargo test

# Executar testes com coverage
cargo test -- --nocapture

# Executar testes em modo watch
cargo watch -x test

# Formatar c√≥digo
cargo fmt

# Verificar problemas de c√≥digo
cargo clippy

# Limpar build
cargo clean

# Atualizar depend√™ncias
cargo update
```

### Comandos NPM

```bash
# Instalar depend√™ncias
npm install

# Iniciar em modo desenvolvimento
npm run dev

# Iniciar em modo produ√ß√£o
npm start

# Executar testes
npm test

# Executar testes com coverage
npm run test:coverage

# Executar testes em modo watch
npm run test:watch

# Executar linter
npm run lint

# Compilar TypeScript
npm run build

# Limpar diret√≥rio dist
npm run clean
```

### Comandos de Servi√ßo

```bash
# Iniciar Blockchain Service
cd hasher/services/blockchain
cargo run

# Iniciar User Service
cd hasher/services/user
cargo run

# Iniciar ZKP Service
cd hasher/services/zkp
cargo run

# Iniciar todos os servi√ßos (requer Docker)
docker-compose up -d
```

### Comandos de Monitoramento

```bash
# Ver logs do Blockchain Service
docker logs -f blockchain-service

# Ver logs do User Service
docker logs -f user-service

# Ver logs do ZKP Service
docker logs -f zkp-service

# Ver m√©tricas do Prometheus
curl http://localhost:9090/metrics

# Verificar sa√∫de dos servi√ßos
curl http://localhost:8084/health  # Blockchain Service
curl http://localhost:8085/health  # User Service
curl http://localhost:8082/health  # ZKP Service
```

### Comandos de Banco de Dados

```bash
# Executar migra√ß√µes
cargo run --bin migrations

# Backup do banco de dados
pg_dump -U postgres ibelieve > backup.sql

# Restaurar backup
psql -U postgres ibelieve < backup.sql
```

### Comandos de Seguran√ßa

```bash
# Gerar chaves de desenvolvimento
cargo run --bin generate-keys

# Verificar vulnerabilidades
cargo audit

# Verificar depend√™ncias desatualizadas
cargo outdated
```

## Executando os Servi√ßos

### Blockchain Service

```bash
cd hasher/services/blockchain
cargo run
```

Endpoints dispon√≠veis:
- `POST /api/blockchain/verify-assets`: Verifica ativos na blockchain
- `GET /api/blockchain/verify-transaction/{tx_hash}`: Verifica uma transa√ß√£o espec√≠fica
- Swagger UI: http://localhost:8084/swagger-ui/

### User Service

```bash
cd hasher/services/user
cargo run
```

Endpoints dispon√≠veis:
- `GET /api/users/{user_id}`: Obt√©m informa√ß√µes de um usu√°rio
- `POST /api/users`: Cria um novo usu√°rio
- `PUT /api/users/{user_id}`: Atualiza um usu√°rio existente
- Swagger UI: http://localhost:8085/swagger-ui/

### ZKP Service

```bash
cd hasher/services/zkp
cargo run
```

Endpoints dispon√≠veis:
- `POST /api/zkp/generate`: Gera uma nova prova ZKP
- `POST /api/zkp/verify`: Verifica uma prova ZKP
- Swagger UI: http://localhost:8082/swagger-ui/

## Exemplos de Uso

### Verifica√ß√£o de Ativos

```bash
curl -X POST http://localhost:8084/api/blockchain/verify-assets \
  -H "Content-Type: application/json" \
  -d '{
    "verified": true,
    "timestamp": "2024-03-24T12:00:00Z",
    "transaction_hash": "0x123..."
  }'
```

### Cria√ß√£o de Usu√°rio

```bash
curl -X POST http://localhost:8085/api/users \
  -H "Content-Type: application/json" \
  -d '{
    "wallet_address": "0x123...",
    "created_at": "2024-03-24T12:00:00Z",
    "updated_at": "2024-03-24T12:00:00Z"
  }'
```

### Gera√ß√£o de Prova ZKP

```bash
curl -X POST http://localhost:8082/api/zkp/generate \
  -H "Content-Type: application/json" \
  -d '{
    "proof": "zkp_proof_here",
    "public_inputs": ["input1", "input2"],
    "verification_key": "verification_key_here"
  }'
```

## Estrutura de Dados

### BlockchainVerification
```rust
{
    verified: bool,
    timestamp: DateTime<Utc>,
    transaction_hash: Option<String>
}
```

### User
```rust
{
    id: Uuid,
    wallet_address: String,
    created_at: DateTime<Utc>,
    updated_at: DateTime<Utc>
}
```

### ZKPProof
```rust
{
    proof: String,
    public_inputs: Vec<String>,
    verification_key: String
}
```

## Desenvolvimento

### Adicionando Novas Funcionalidades

1. Crie um novo branch:
```bash
git checkout -b feature/nova-funcionalidade
```

2. Implemente as mudan√ßas
3. Execute os testes:
```bash
cargo test
```

4. Fa√ßa commit das mudan√ßas:
```bash
git add .
git commit -m "feat: adiciona nova funcionalidade"
```

5. Envie para o reposit√≥rio:
```bash
git push origin feature/nova-funcionalidade
```

### Conven√ß√µes de C√≥digo

- Use `cargo fmt` para formatar o c√≥digo
- Use `cargo clippy` para verificar problemas de c√≥digo
- Siga as conven√ß√µes de nomenclatura do Rust
- Documente todas as fun√ß√µes p√∫blicas

## Seguran√ßa

- Todas as APIs s√£o protegidas por CORS
- Use HTTPS em produ√ß√£o
- Valide todas as entradas
- Implemente rate limiting em produ√ß√£o
- Use vari√°veis de ambiente para configura√ß√µes sens√≠veis
- Implemente autentica√ß√£o JWT
- Mantenha as depend√™ncias atualizadas

## Monitoramento e Logs

### Prometheus
- M√©tricas de performance
- Alertas configur√°veis
- Hist√≥rico de dados

### Grafana
- Dashboards personalizados
- Visualiza√ß√£o de m√©tricas
- Alertas em tempo real

### Elasticsearch
- Logs centralizados
- An√°lise de performance
- Busca em tempo real

## Contribui√ß√£o

1. Fork o projeto
2. Crie sua branch de feature (`git checkout -b feature/AmazingFeature`)
3. Commit suas mudan√ßas (`git commit -m 'Add some AmazingFeature'`)
4. Push para a branch (`git push origin feature/AmazingFeature`)
5. Abra um Pull Request

## Licen√ßa

Este projeto est√° licenciado sob a licen√ßa MIT - veja o arquivo [LICENSE](LICENSE) para detalhes.

## Contato

Seu Nome - [@seu_twitter](https://twitter.com/seu_twitter)

Link do Projeto: [https://github.com/seu-usuario/ibelieve-finance](https://github.com/seu-usuario/ibelieve-finance)

# Ibelieve-Finance

## Estrutura do Projeto
- `contracts/`: Contratos inteligentes.
- `scripts/`: Scripts de deploy e intera√ß√£o com contratos.
- `test/`: Testes unit√°rios e de integra√ß√£o.
- `frontend/`: C√≥digo da interface do usu√°rio.
- `backend/`: C√≥digo do servidor e APIs.
- `docs/`: Documenta√ß√£o do projeto.

## Instala√ß√£o e Configura√ß√£o
1. Clone o reposit√≥rio.
2. Instale as depend√™ncias:
   ```bash
   npm install
   ```

## Execu√ß√£o do N√≥ Hardhat
Para iniciar o n√≥ Hardhat local:
```bash
npx hardhat node
```

## Deploy de Contratos
Para fazer o deploy dos contratos:
```bash
npx hardhat run scripts/deploy.js --network localhost
```

## Testes
Para executar os testes:
```bash
npx hardhat test
```

## Documenta√ß√£o
Consulte a pasta `docs/` para documenta√ß√£o detalhada do projeto.